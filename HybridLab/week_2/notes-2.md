These notes are available as a public google doc at https://docs.google.com/document/d/1O3EgmwT-5qEycv-sHI54gDweoGtrG_3O6oQ1RLOkF6U/edit?usp=sharing

Arduino and Max–Part 2

Sensors for synthesizing sensitive sounds

Getting what you need

    Download all the needed files from http://otherbirds.com/hybrid/week_2.zip

    This zip directory contains a single arduino sketch, as well as a whole bunch of Max patches. We’re going to plug those patches together, in conjunction with the arduino, to make a synthesizer that we can play using various sensors


Reading sensor data

    Most sensors work by measuring a change in resistance. However, the analog pins on our arduino measure voltage. Each analog pin can report a value between 0 and 1023. That value measures where the pin is in voltage between +5V, or the voltage powering the arduino, and 0V, or ground.

    To turn the changing resistance of our sensor to a voltage measurable by the analog pins of the arduino, we build what’s called a voltage comparator circuit. Check out http://playground.arduino.cc/Learning/PhotoResistor for a schematic representation of what that looks like.

    Try building a sketch to read a sensor value from one of the analog pins. Print that value using Serial.println and inspect it using the serial monitor


Getting sensor data into Max

    Open and upload the arduino sketch called sensor_getter.ino. This sketch simply reads through each of the analog pins in the arduino, writing each one to the serial connection as it does.

    Open up the Max patch called Skeleton.maxpat. This is going to be the patch where we build our synthesizer.

    Imagine building this patch by visualizing the way data will flow through it. In the first stage, we pull values from the sensors of the arduino. Copy the contents of the SerialIn max patch to the Skeleton patch to add this functionality.

    Next, we need to scale the values coming in from the arduino. The values from each sensor are in the range 0-1023; however, each of the synth controls in Max is expecting something in the range 0 to 1. We can use the contents of the SensorScale patch to select for a particular analog pin and to scale its value appropriately.

    Once we have good values coming in from our sensors, we can move on to the synth. Like many synthesizers, ours it triggered by MIDI note events.

    Try pasting the contents of NoiseSynth into the Skeleton patch. Be sure to hookup the output of the synthesizer to global sound output.

    Now we need some MIDI notes. Paste the contents of the NoteKeyboard patch into Skeleton. This set of objects generates MIDI notes in response to keyboard presses. If you connect the output of the NoteKeyboard objects to the MIDI input of the NoiseSynthesizer, you should hear notes when you press keys on the keyboard.

    Finally, we can use the scaled values from sensors on the arduino to modulate parameters in our synthesizer. There are two parameters on the NoiseSynthesizer that can be modulated directly: breathiness and brightness. Try connecting one of the outputs from a SensorScale to one of the blue number box inputs of the NoiseSynthesizer. See how changing the value of the sensor changes the value of the sounds.

    If you’ve got all that working then congratulations, you’ve already touched on every single piece of information you need to build a synthesizer controlled by sensor data from the physical world. Making a more complex synthesizer is just a question of adding more sensors and more sound processing.
    With extra time, try experimenting with different sensors, or with the NotePulsar patch. This patch generates MIDI notes just like the NoteKeyboard patch, except it does so at regular intervals and from a constrained set of notes. It also has parameters for modulation, just like the NoiseSynth itself. Try connecting these parameters to scaled sensor readings to modulate the tempo and pitch of the notes generated by the NotePulsar.